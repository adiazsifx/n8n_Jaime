{"createdAt":"2025-05-15T21:20:10.343Z","updatedAt":"2025-05-15T22:50:09.000Z","id":"6EoAd21buVrw1NBd","name":"MCP_Server_Portal","active":true,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"userid","type":"number"},{"name":"customerid"},{"name":"token"},{"name":"operation"}]}},"id":"623137e9-0d3c-4a79-be28-e2f151955792","name":"When Executed by Another Workflow","type":"n8n-nodes-base.executeWorkflowTrigger","position":[1220,900],"typeVersion":1.1},{"parameters":{"rules":{"values":[{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"conditions":[{"id":"81b134bc-d671-4493-b3ad-8df9be3f49a6","operator":{"type":"string","operation":"equals"},"leftValue":"={{ $('When Executed by Another Workflow').first().json.operation }}","rightValue":"getTickets"}],"combinator":"and"},"renameOutput":true,"outputKey":"getTickets"},{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"conditions":[{"id":"8d57914f-6587-4fb3-88e0-aa1de6ba56c1","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"={{ $('When Executed by Another Workflow').first().json.operation }}","rightValue":"getServices"}],"combinator":"and"},"renameOutput":true,"outputKey":"getServices"}]},"options":{}},"id":"4b303d80-0714-4339-b6aa-371dc5b980a3","name":"Operation","type":"n8n-nodes-base.switch","position":[1580,900],"typeVersion":3.2},{"parameters":{"content":"## 1. Set up an MCP Server Trigger\n[Read more about the MCP Server Trigger](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger)","height":660,"width":680,"color":7},"id":"085509ee-a2cf-40f0-a249-140529d3dcc9","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[460,520],"typeVersion":1},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"response","options":{}},"id":"7436ff99-7ae7-483f-9e60-044a2614583f","name":"Aggregate Search Results","type":"n8n-nodes-base.aggregate","position":[2200,1020],"typeVersion":1},{"parameters":{"method":"POST","url":"https://portal-gateway.ifxcorp.com/api/service/getTicketsServicesByTypeId","sendQuery":true,"queryParameters":{"parameters":[{}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"access-token","value":"={{ $('When Executed by Another Workflow').item.json.token }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"{\"customerId\":\"35631\",\"status\":[5]}","options":{"timeout":10000}},"id":"970edb08-1050-4520-ab2f-3762bef5a2de","name":"Get Services","type":"n8n-nodes-base.httpRequest","position":[1900,1020],"typeVersion":4.2},{"parameters":{"url":"=https://portal-gateway.ifxcorp.com/api/ticket/info/customer/ {{ $('When Executed by Another Workflow').item.json.customerid }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"access-token","value":"={{ $('When Executed by Another Workflow').item.json.token }}"}]},"options":{"timeout":10000}},"id":"6257fa17-3646-48f5-9c24-54e051c01e5c","name":"Get Tickets","type":"n8n-nodes-base.httpRequest","position":[1920,740],"typeVersion":4.2},{"parameters":{"name":"getTickets","description":"Searches for and returns tickets details.","workflowId":{"__rl":true,"mode":"id","value":"={{ $workflow.id }}"},"workflowInputs":{"mappingMode":"defineBelow","value":{"operation":"getTickets","userid":"={{ $fromAI('userid', `userid`, 'number') }}","customerid":"={{ $fromAI('customerid', `customerid`, 'string') }}","token":"={{ $fromAI('token', `token`, 'string') }}"},"matchingColumns":[],"schema":[{"id":"userid","displayName":"userid","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"number","removed":false},{"id":"customerid","displayName":"customerid","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"token","displayName":"token","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"operation","displayName":"operation","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"id":"3da23da1-7c00-4abe-a4ea-92054acea4cb","name":"get Tickets","type":"@n8n/n8n-nodes-langchain.toolWorkflow","position":[640,900],"typeVersion":2.1},{"parameters":{"name":"getServices","description":"Returns an service's details.","workflowId":{"__rl":true,"mode":"id","value":"={{ $workflow.id }}"},"workflowInputs":{"mappingMode":"defineBelow","value":{"operation":"getServices","userid":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('userid', ``, 'number') }}","customerid":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('customerid', ``, 'string') }}","token":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('token', ``, 'string') }}"},"matchingColumns":[],"schema":[{"id":"userid","displayName":"userid","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"number","removed":false},{"id":"customerid","displayName":"customerid","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"token","displayName":"token","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"operation","displayName":"operation","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"id":"dbed6e44-bb89-4dc2-8b27-cdd36064d10c","name":"get Services","type":"@n8n/n8n-nodes-langchain.toolWorkflow","position":[880,900],"typeVersion":2.1},{"parameters":{"path":"mcpportalclient"},"id":"a73d3ac6-bdec-4353-8b2c-ab9dce2aa40b","name":"Portal MCP Server","type":"@n8n/n8n-nodes-langchain.mcpTrigger","position":[620,680],"webhookId":"5f6728df-d3e8-48bb-9a38-0f2e54c7962c","typeVersion":1,"notesInFlow":false}],"connections":{"Operation":{"main":[[{"node":"Get Tickets","type":"main","index":0}],[{"node":"Get Services","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Operation","type":"main","index":0}]]},"Get Services":{"main":[[{"node":"Aggregate Search Results","type":"main","index":0}]]},"get Tickets":{"ai_tool":[[{"node":"Portal MCP Server","type":"ai_tool","index":0}]]},"get Services":{"ai_tool":[[{"node":"Portal MCP Server","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"18490a71-4533-4ab1-9c04-d44cfd36d137","triggerCount":1,"tags":[]}