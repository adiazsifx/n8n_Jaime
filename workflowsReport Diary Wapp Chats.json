{"createdAt":"2025-05-31T13:27:55.970Z","updatedAt":"2025-05-31T18:13:05.000Z","id":"5RHEWEypXBbulmXR","name":"Report Diary Wapp Chats","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-280,460],"id":"7a36fb3b-a6e2-41e0-bcd6-32b2aeef6067","name":"When clicking ‘Execute workflow’"},{"parameters":{"labelsUi":{"labelsValues":[{"label":"={{ $json.fecha }}"}]},"data":"={{ $json.total_conversations }}","chartOptions":{"devicePixelRatio":1,"format":"png"},"datasetOptions":{"backgroundColor":"#3B82F6","borderColor":"#1E40AF"}},"type":"n8n-nodes-base.quickChart","typeVersion":1,"position":[400,140],"id":"32021963-2aa6-4dc3-8dc0-81f9676e9106","name":"QuickChart"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"fecha"},{"fieldToAggregate":"total_conversations"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[180,140],"id":"af637fb4-0d40-4158-a7f8-15a540eb7100","name":"Aggregate"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"nombrechat"},{"fieldToAggregate":"total_conversations"},{"fieldToAggregate":"fecha"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[180,300],"id":"74de9f6a-b731-4894-8700-df71a3a4a504","name":"Aggregate1"},{"parameters":{"labelsUi":{"labelsValues":[{"label":"={{ $json.nombrechat }}"}]},"data":"={{ $json.total_conversations }}","chartOptions":{"devicePixelRatio":1,"format":"png"},"datasetOptions":{"backgroundColor":"#3B82F6","borderColor":"#1E40AF","label":"=Chats del {{ $now.minus({ days: 1 }).toFormat('dd-MMM') }}"}},"type":"n8n-nodes-base.quickChart","typeVersion":1,"position":[400,300],"id":"f750fe4a-a1f2-48ca-92a0-aa2746d9b604","name":"QuickChart1"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"sentimiento"},{"fieldToAggregate":"total"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[180,460],"id":"43b6a3d7-b025-48b0-8802-57bc7e457895","name":"Aggregate2"},{"parameters":{"labelsUi":{"labelsValues":[{"label":"={{ $json.sentimiento }}"}]},"data":"={{ $json.total }}","chartOptions":{"devicePixelRatio":1,"format":"png"},"datasetOptions":{"backgroundColor":"#3B82F6","borderColor":"#1E40AF","label":"=Chats de {{ $now.toFormat('MMMM', { locale: 'es' }).toUpperCase() }}"}},"type":"n8n-nodes-base.quickChart","typeVersion":1,"position":[400,460],"id":"94106f79-95e0-4675-af5d-eab6edcedbd6","name":"QuickChart2"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"sentimiento"},{"fieldToAggregate":"total"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[180,620],"id":"0d9a286f-5e9f-479a-a5e1-6ab33ebdf9f8","name":"Aggregate3"},{"parameters":{"labelsUi":{"labelsValues":[{"label":"={{ $json.sentimiento }}"}]},"data":"={{ $json.total }}","chartOptions":{"devicePixelRatio":1,"format":"png"},"datasetOptions":{"backgroundColor":"#3B82F6","borderColor":"#1E40AF","label":"=Chats del {{ $now.minus({ days: 1 }).toFormat('dd-MMM') }}"}},"type":"n8n-nodes-base.quickChart","typeVersion":1,"position":[400,620],"id":"5ffa1748-3597-4cad-ad66-2495e749c923","name":"QuickChart3"},{"parameters":{"operation":"executeQuery","query":"SELECT \n  TO_CHAR(DATE(\"dateTime\"), 'DD-Mon') as fecha,\n  COUNT(*) as total_conversations\nFROM messages\nWHERE conversation IS NOT NULL AND conversation != ''\nGROUP BY DATE(\"dateTime\")\nORDER BY DATE(\"dateTime\") ASC;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-40,140],"id":"11a80f18-cc20-481d-9857-18753c12340c","name":"Chats Total Mes","credentials":{"postgres":{"id":"i1HXN1QutN6BIHF9","name":"Postgres_whisper"}}},{"parameters":{"operation":"executeQuery","query":"SELECT \n DATE(\"dateTime\") as fecha,\n nombrechat,\n COUNT(*) as total_conversations\nFROM messages\nWHERE conversation IS NOT NULL AND conversation != ''\n AND DATE(\"dateTime\") = CURRENT_DATE - INTERVAL '1 day'\nGROUP BY DATE(\"dateTime\"), nombrechat\nORDER BY fecha DESC, total_conversations DESC\nLIMIT 10;\n\n","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-40,300],"id":"7b105ba7-a06d-4e48-84e5-0fccff33dadf","name":"Chats Total Dia Anterior","credentials":{"postgres":{"id":"i1HXN1QutN6BIHF9","name":"Postgres_whisper"}}},{"parameters":{"operation":"executeQuery","query":"SELECT \n   sentimiento,\n   COUNT(*) as total\nFROM summary_sentimientos\nWHERE EXTRACT(MONTH FROM created_at) = {{ $now.month }} \n   AND EXTRACT(YEAR FROM created_at) = {{ $now.year }}\nGROUP BY sentimiento\nORDER BY total DESC;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-40,460],"id":"7f38c86d-f066-4421-ac19-aba31c9270ad","name":"Sentimientos Mes Actual","credentials":{"postgres":{"id":"i1HXN1QutN6BIHF9","name":"Postgres_whisper"}}},{"parameters":{"operation":"executeQuery","query":"SELECT \n  sentimiento,\n  COUNT(*) as total\nFROM summary_sentimientos\nWHERE DATE(created_at) = CURRENT_DATE - INTERVAL '1 day'\nGROUP BY sentimiento\nORDER BY total DESC;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-40,620],"id":"51e44c37-da76-4a67-b09a-359f0bd9417b","name":"Sentimientos Dia Anterior","credentials":{"postgres":{"id":"i1HXN1QutN6BIHF9","name":"Postgres_whisper"}}},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"chat"},{"fieldToAggregate":"total_negativos"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[180,780],"id":"7a4df4d4-539a-4f12-80c6-4db65d3461e8","name":"Aggregate4"},{"parameters":{"labelsUi":{"labelsValues":[{"label":"={{ $json.chat }}"}]},"data":"={{ $json.total_negativos }}","chartOptions":{"devicePixelRatio":1,"format":"png"},"datasetOptions":{"backgroundColor":"#3B82F6","borderColor":"#1E40AF","label":"=Chats Negativos {{ $now.toFormat('MMMM', { locale: 'es' }).toUpperCase() }}"}},"type":"n8n-nodes-base.quickChart","typeVersion":1,"position":[400,780],"id":"09c155f4-011e-4c61-8bf9-cb403aa5dbaa","name":"QuickChart4"},{"parameters":{"operation":"executeQuery","query":"SELECT \n  CASE \n     WHEN REPLACE(REPLACE(chat, CHR(10), ''), CHR(13), '') = '' OR chat IS NULL \n     THEN 'TBD' \n     ELSE REPLACE(REPLACE(chat, CHR(10), ''), CHR(13), '') \n  END as chat,\n  COUNT(*) as total_negativos\nFROM summary_sentimientos\nWHERE sentimiento = 'NEGATIVE'\n  AND EXTRACT(MONTH FROM created_at) = EXTRACT(MONTH FROM CURRENT_DATE)\n  AND EXTRACT(YEAR FROM created_at) = EXTRACT(YEAR FROM CURRENT_DATE)\nGROUP BY chat\nORDER BY total_negativos DESC;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-40,780],"id":"3972ff7d-4dc9-4b42-a1b7-25805cb80b67","name":"Negativo Mes Anterior","credentials":{"postgres":{"id":"i1HXN1QutN6BIHF9","name":"Postgres_whisper"}}},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"chat"},{"fieldToAggregate":"total_negativos"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[180,940],"id":"0658323b-4202-4b2f-993e-45ea9b358ea6","name":"Aggregate5"},{"parameters":{"labelsUi":{"labelsValues":[{"label":"={{ $json.chat }}"}]},"data":"={{ $json.total_negativos }}","chartOptions":{"devicePixelRatio":1,"format":"png"},"datasetOptions":{"backgroundColor":"#3B82F6","borderColor":"#1E40AF","label":"=Chats del {{ $now.minus({ days: 1 }).toFormat('dd-MMM') }}"}},"type":"n8n-nodes-base.quickChart","typeVersion":1,"position":[400,940],"id":"fe77c901-60fe-4c6b-96c2-ecb8750c9212","name":"QuickChart5"},{"parameters":{"operation":"executeQuery","query":"SELECT \n  CASE \n     WHEN REPLACE(REPLACE(chat, CHR(10), ''), CHR(13), '') = '' OR chat IS NULL \n     THEN 'TBD' \n     ELSE REPLACE(REPLACE(chat, CHR(10), ''), CHR(13), '') \n  END as chat,\n  COUNT(*) as total_negativos\nFROM summary_sentimientos\nWHERE sentimiento = 'NEGATIVE'\n  AND DATE(created_at) = CURRENT_DATE - INTERVAL '1 day'\nGROUP BY chat\nORDER BY total_negativos DESC;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-40,940],"id":"f09c6e62-ec28-4044-90d7-0bbcd8120026","name":"Negativo Dia Anterior","credentials":{"postgres":{"id":"i1HXN1QutN6BIHF9","name":"Postgres_whisper"}}},{"parameters":{"html":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Resumen de Sentimientos y Conversaciones</title>\n</head>\n<body style=\"margin: 0; padding: 20px; font-family: Arial, sans-serif; background-color: #f5f5f5;\">\n    <!-- Header -->\n    <table style=\"width: 100%; max-width: 800px; margin: 0 auto; background-color: #667eea; border-radius: 8px;\">\n        <tr>\n            <td style=\"padding: 30px; text-align: center;\">\n                <h1 style=\"color: #ffffff; margin: 0; font-size: 24px; font-weight: bold; word-wrap: break-word;\">📊 Resumen de Sentimientos y Conversaciones</h1>\n                <p style=\"color: #ffffff; margin: 10px 0 0 0; font-size: 14px;\">Análisis WhatsApp - Reporte Diario</p>\n            </td>\n        </tr>\n    </table>\n\n    <!-- Daily Section -->\n    <table style=\"width: 100%; max-width: 800px; margin: 20px auto 0 auto; background-color: #ffffff; border-radius: 8px; border: 1px solid #e2e8f0;\">\n        <tr>\n            <td style=\"padding: 25px;\">\n                <h2 style=\"color: #333333; margin: 0 0 20px 0; font-size: 18px; border-bottom: 3px solid #3B82F6; padding-bottom: 10px; word-wrap: break-word;\">📅 Resumen del Día Anterior</h2>\n                \n                <!-- Daily Charts Row 1 -->\n                <table style=\"width: 100%; margin-bottom: 25px;\">\n                    <tr>\n                        <td style=\"width: 100%; padding-bottom: 15px; vertical-align: top;\">\n                            <table style=\"width: 100%; background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; margin-bottom: 15px;\">\n                                <tr>\n                                    <td style=\"padding: 15px; text-align: center;\">\n                                        <h3 style=\"color: #1e40af; margin: 0 0 15px 0; font-size: 14px; word-wrap: break-word;\">Conversaciones por Chat</h3>\n                                        <div style=\"background-color: #ffffff; border: 1px solid #e2e8f0; border-radius: 4px; padding: 10px; overflow: hidden;\">\n                                            <img src=\"data:image/png;base64,{{ $json.data1 }}\" style=\"max-width: 100%; height: auto; display: block; margin: 0 auto;\" alt=\"Conversaciones por Chat\">\n                                        </div>\n                                        <div style=\"background-color: #f1f5f9; border: 1px solid #cbd5e1; border-radius: 4px; padding: 10px; margin-top: 10px;\">\n                                            <h4 style=\"color: #334155; margin: 0 0 5px 0; font-size: 12px; font-weight: bold;\">📊 Resumen Visual</h4>\n                                            <p style=\"color: #64748b; margin: 0; font-size: 11px;\">{{ $json.resumen1 }}</p>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"width: 100%; padding-bottom: 15px; vertical-align: top;\">\n                            <table style=\"width: 100%; background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px;\">\n                                <tr>\n                                    <td style=\"padding: 15px; text-align: center;\">\n                                        <h3 style=\"color: #1e40af; margin: 0 0 15px 0; font-size: 14px; word-wrap: break-word;\">Sentimientos del Día</h3>\n                                        <div style=\"background-color: #ffffff; border: 1px solid #e2e8f0; border-radius: 4px; padding: 10px; overflow: hidden;\">\n                                            <img src=\"data:image/png;base64,{{ $json.data3 }}\" style=\"max-width: 100%; height: auto; display: block; margin: 0 auto;\" alt=\"Sentimientos del Día\">\n                                        </div>\n                                        <div style=\"background-color: #f1f5f9; border: 1px solid #cbd5e1; border-radius: 4px; padding: 10px; margin-top: 10px;\">\n                                            <h4 style=\"color: #334155; margin: 0 0 5px 0; font-size: 12px; font-weight: bold;\">📊 Resumen Visual</h4>\n                                            <p style=\"color: #64748b; margin: 0; font-size: 11px;\">{{ $json.resumen2 }}</p>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                </table>\n\n                <!-- Daily Charts Row 2 -->\n                <table style=\"width: 100%;\">\n                    <tr>\n                        <td style=\"width: 100%; padding: 0;\">\n                            <table style=\"width: 100%; background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px;\">\n                                <tr>\n                                    <td style=\"padding: 15px; text-align: center;\">\n                                        <h3 style=\"color: #dc2626; margin: 0 0 15px 0; font-size: 14px; word-wrap: break-word;\">🚨 Chats Negativos del Día</h3>\n                                        <div style=\"background-color: #ffffff; border: 1px solid #e2e8f0; border-radius: 4px; padding: 10px; overflow: hidden;\">\n                                            <img src=\"data:image/png;base64,{{ $json.data5 }}\" style=\"max-width: 100%; height: auto; display: block; margin: 0 auto;\" alt=\"Chats Negativos del Día\">\n                                        </div>\n                                        <div style=\"background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 4px; padding: 10px; margin-top: 10px;\">\n                                            <h4 style=\"color: #991b1b; margin: 0 0 5px 0; font-size: 12px; font-weight: bold;\">📊 Resumen Visual</h4>\n                                            <p style=\"color: #b91c1c; margin: 0; font-size: 11px;\">{{ $json.resumen3 }}</p>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n\n    <!-- Monthly Section -->\n    <table style=\"width: 100%; max-width: 800px; margin: 20px auto 0 auto; background-color: #ffffff; border-radius: 8px; border: 1px solid #bbf7d0;\">\n        <tr>\n            <td style=\"padding: 25px;\">\n                <h2 style=\"color: #333333; margin: 0 0 20px 0; font-size: 18px; border-bottom: 3px solid #10b981; padding-bottom: 10px; word-wrap: break-word;\">📈 Acumulado del Mes</h2>\n                \n                <!-- Monthly Charts Row 1 -->\n                <table style=\"width: 100%; margin-bottom: 25px;\">\n                    <tr>\n                        <td style=\"width: 100%; padding-bottom: 15px; vertical-align: top;\">\n                            <table style=\"width: 100%; background-color: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 6px; margin-bottom: 15px;\">\n                                <tr>\n                                    <td style=\"padding: 15px; text-align: center;\">\n                                        <h3 style=\"color: #059669; margin: 0 0 15px 0; font-size: 14px; word-wrap: break-word;\">Conversaciones por Día</h3>\n                                        <div style=\"background-color: #ffffff; border: 1px solid #bbf7d0; border-radius: 4px; padding: 10px; overflow: hidden;\">\n                                            <img src=\"data:image/png;base64,{{ $json.data }}\" style=\"max-width: 100%; height: auto; display: block; margin: 0 auto;\" alt=\"Conversaciones del Mes\">\n                                        </div>\n                                        <div style=\"background-color: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 4px; padding: 10px; margin-top: 10px;\">\n                                            <h4 style=\"color: #065f46; margin: 0 0 5px 0; font-size: 12px; font-weight: bold;\">📊 Resumen Visual</h4>\n                                            <p style=\"color: #059669; margin: 0; font-size: 11px;\">{{ $json.resumen4 }}</p>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"width: 100%; padding-bottom: 15px; vertical-align: top;\">\n                            <table style=\"width: 100%; background-color: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 6px;\">\n                                <tr>\n                                    <td style=\"padding: 15px; text-align: center;\">\n                                        <h3 style=\"color: #059669; margin: 0 0 15px 0; font-size: 14px; word-wrap: break-word;\">Sentimientos del Mes</h3>\n                                        <div style=\"background-color: #ffffff; border: 1px solid #bbf7d0; border-radius: 4px; padding: 10px; overflow: hidden;\">\n                                            <img src=\"data:image/png;base64,{{ $json.data2 }}\" style=\"max-width: 100%; height: auto; display: block; margin: 0 auto;\" alt=\"Sentimientos del Mes\">\n                                        </div>\n                                        <div style=\"background-color: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 4px; padding: 10px; margin-top: 10px;\">\n                                            <h4 style=\"color: #065f46; margin: 0 0 5px 0; font-size: 12px; font-weight: bold;\">📊 Resumen Visual</h4>\n                                            <p style=\"color: #059669; margin: 0; font-size: 11px;\">{{ $json.resumen5 }}</p>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                </table>\n\n                <!-- Monthly Charts Row 2 -->\n                <table style=\"width: 100%;\">\n                    <tr>\n                        <td style=\"width: 100%; padding: 0;\">\n                            <table style=\"width: 100%; background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 6px;\">\n                                <tr>\n                                    <td style=\"padding: 15px; text-align: center;\">\n                                        <h3 style=\"color: #dc2626; margin: 0 0 15px 0; font-size: 14px; word-wrap: break-word;\">⚠️ Chats Negativos del Mes</h3>\n                                        <div style=\"background-color: #ffffff; border: 1px solid #fecaca; border-radius: 4px; padding: 10px; overflow: hidden;\">\n                                            <img src=\"data:image/png;base64,{{ $json.data4 }}\" style=\"max-width: 100%; height: auto; display: block; margin: 0 auto;\" alt=\"Chats Negativos del Mes\">\n                                        </div>\n                                        <div style=\"background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 4px; padding: 10px; margin-top: 10px;\">\n                                            <h4 style=\"color: #991b1b; margin: 0 0 5px 0; font-size: 12px; font-weight: bold;\">📊 Resumen Visual</h4>\n                                            <p style=\"color: #b91c1c; margin: 0; font-size: 11px;\">{{ $json.resumen6 }}</p>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n\n    <!-- Summary Stats -->\n    <table style=\"width: 100%; max-width: 800px; margin: 20px auto 0 auto; background-color: #ffffff; border-radius: 8px; border: 1px solid #e2e8f0;\">\n        <tr>\n            <td style=\"padding: 25px;\">\n                <h2 style=\"color: #333333; margin: 0 0 20px 0; font-size: 18px; border-bottom: 3px solid #f59e0b; padding-bottom: 10px; word-wrap: break-word;\">📋 Resumen Ejecutivo</h2>\n                \n                <table style=\"width: 100%;\">\n                    <tr>\n                        <td style=\"width: 33.33%; padding: 15px; text-align: center; background-color: #eff6ff; border-radius: 6px;\">\n                            <div style=\"color: #1e40af; font-size: 20px; font-weight: bold; margin-bottom: 5px;\">📊</div>\n                            <div style=\"color: #1e40af; font-size: 12px; font-weight: bold;\">Análisis Automatizado</div>\n                            <div style=\"color: #64748b; font-size: 10px;\">Generated by aifx</div>\n                        </td>\n                        <td style=\"width: 33.33%; padding: 15px; text-align: center; background-color: #f0fdf4; border-radius: 6px;\">\n                            <div style=\"color: #059669; font-size: 20px; font-weight: bold; margin-bottom: 5px;\">💬</div>\n                            <div style=\"color: #059669; font-size: 12px; font-weight: bold;\">WhatsApp Analytics</div>\n                            <div style=\"color: #64748b; font-size: 10px;\">Tiempo Real</div>\n                        </td>\n                        <td style=\"width: 33.33%; padding: 15px; text-align: center; background-color: #fef2f2; border-radius: 6px;\">\n                            <div style=\"color: #dc2626; font-size: 20px; font-weight: bold; margin-bottom: 5px;\">🎯</div>\n                            <div style=\"color: #dc2626; font-size: 12px; font-weight: bold;\">Alertas Tempranas</div>\n                            <div style=\"color: #64748b; font-size: 10px;\">Detección Proactiva</div>\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n\n    <!-- Footer -->\n    <table style=\"width: 100%; max-width: 800px; margin: 20px auto 40px auto;\">\n        <tr>\n            <td style=\"padding: 20px; text-align: center; color: #64748b; font-size: 10px;\">\n                <p style=\"margin: 0; word-wrap: break-word;\">📧 Reporte generado automáticamente • 🕒 Fecha: {{ $now.format('yyyy-MM-dd') }}</p>\n                <p style=\"margin: 5px 0 0 0; word-wrap: break-word;\">💡 Para más información, contacte al equipo de análisis de datos</p>\n            </td>\n        </tr>\n    </table>\n</body>\n</html>"},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[1240,580],"id":"47e31e89-2c08-4789-9896-337f18525682","name":"HTML"},{"parameters":{"operation":"binaryToPropery","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[620,140],"id":"84a2d01c-7517-439e-90ef-baf68e4a85d3","name":"Extract from File"},{"parameters":{"operation":"binaryToPropery","destinationKey":"data1","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[620,300],"id":"e048aef1-e327-4458-9598-a0838779338d","name":"Extract from File1"},{"parameters":{"operation":"binaryToPropery","destinationKey":"data2","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[620,460],"id":"0aff4a9f-c802-4b5c-994e-94737a8084e7","name":"Extract from File2"},{"parameters":{"operation":"binaryToPropery","destinationKey":"data3","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[620,620],"id":"16426173-03d9-4f88-85d8-d1ffe1cc51c7","name":"Extract from File3"},{"parameters":{"operation":"binaryToPropery","destinationKey":"data4","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[620,780],"id":"8b1f64dc-1c1f-4f97-953e-a4105116735b","name":"Extract from File4"},{"parameters":{"operation":"binaryToPropery","destinationKey":"data5","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[620,940],"id":"9df3b1c1-f1e2-4af6-bb6f-597834a04eb3","name":"Extract from File5"},{"parameters":{"mode":"combine","combineBy":"combineByPosition","numberInputs":6,"options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.1,"position":[1060,520],"id":"af6c770a-1139-4bc6-a95e-01ff1ca03457","name":"Merge"},{"parameters":{"toRecipients":"jaimep@ifxcorp.com","subject":"Analissi Chats Whatps aPP","bodyContent":"={{ $json.html }}","additionalFields":{"bodyContentType":"html"}},"type":"n8n-nodes-base.microsoftOutlook","typeVersion":2,"position":[1740,580],"id":"e072d11a-302f-4dde-aaf9-f380ed68469e","name":"Microsoft Outlook","webhookId":"d216cc8d-eece-4961-beb8-27b2fdcaa15e","credentials":{"microsoftOutlookOAuth2Api":{"id":"xSTIlfhp3ac7TN3h","name":"Mail ai@ifxcorp.com"}}},{"parameters":{"jsCode":"// Limpiar saltos de línea del HTML\nconst htmlContent = $input.first().json.html;\nconst cleanedHtml = htmlContent.replace(/\\n/g, '').replace(/\\r/g, '');\n\nreturn [{\n  json: {\n    html: cleanedHtml\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1480,580],"id":"48ec89bc-257e-4722-b655-d9b91f0a7e9d","name":"Code"}],"connections":{"When clicking ‘Execute workflow’":{"main":[[{"node":"Chats Total Mes","type":"main","index":0},{"node":"Chats Total Dia Anterior","type":"main","index":0},{"node":"Sentimientos Mes Actual","type":"main","index":0},{"node":"Sentimientos Dia Anterior","type":"main","index":0},{"node":"Negativo Mes Anterior","type":"main","index":0},{"node":"Negativo Dia Anterior","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"QuickChart","type":"main","index":0}]]},"Aggregate1":{"main":[[{"node":"QuickChart1","type":"main","index":0}]]},"Aggregate2":{"main":[[{"node":"QuickChart2","type":"main","index":0}]]},"Aggregate3":{"main":[[{"node":"QuickChart3","type":"main","index":0}]]},"Chats Total Mes":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Chats Total Dia Anterior":{"main":[[{"node":"Aggregate1","type":"main","index":0}]]},"Sentimientos Mes Actual":{"main":[[{"node":"Aggregate2","type":"main","index":0}]]},"Sentimientos Dia Anterior":{"main":[[{"node":"Aggregate3","type":"main","index":0}]]},"Aggregate4":{"main":[[{"node":"QuickChart4","type":"main","index":0}]]},"Negativo Mes Anterior":{"main":[[{"node":"Aggregate4","type":"main","index":0}]]},"Aggregate5":{"main":[[{"node":"QuickChart5","type":"main","index":0}]]},"Negativo Dia Anterior":{"main":[[{"node":"Aggregate5","type":"main","index":0}]]},"QuickChart":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"QuickChart1":{"main":[[{"node":"Extract from File1","type":"main","index":0}]]},"QuickChart2":{"main":[[{"node":"Extract from File2","type":"main","index":0}]]},"QuickChart3":{"main":[[{"node":"Extract from File3","type":"main","index":0}]]},"QuickChart4":{"main":[[{"node":"Extract from File4","type":"main","index":0}]]},"QuickChart5":{"main":[[{"node":"Extract from File5","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Extract from File1":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Extract from File2":{"main":[[{"node":"Merge","type":"main","index":2}]]},"Extract from File3":{"main":[[{"node":"Merge","type":"main","index":3}]]},"Extract from File4":{"main":[[{"node":"Merge","type":"main","index":4}]]},"Extract from File5":{"main":[[{"node":"Merge","type":"main","index":5}]]},"HTML":{"main":[[{"node":"Code","type":"main","index":0}]]},"Merge":{"main":[[{"node":"HTML","type":"main","index":0}]]},"Code":{"main":[[{"node":"Microsoft Outlook","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c4cf5e4e-1574-4a6c-a934-3ad9e0835816","triggerCount":0,"tags":[]}