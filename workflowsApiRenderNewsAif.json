{"createdAt":"2025-06-25T21:43:37.470Z","updatedAt":"2025-06-26T01:28:15.000Z","id":"hGM42n61xGm2Bj8Q","name":"ApiRenderNewsAif","active":false,"isArchived":false,"nodes":[{"parameters":{"jsCode":"const body = items[0].json.body;\nconst binaryImage = items[0].binary.data0;\n\nconst base64Image = Buffer.from(binaryImage.data, 'base64').toString('base64');\n\nreturn [\n  {\n    json: {\n      title: body.title,\n      date: new Date(body.date),\n      summary: body.summary,\n      hint: body.hint,\n      image: base64Image\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-20,-120],"id":"aa78bf52-2c33-4994-9064-a3a0b83b01dd","name":"Code"},{"parameters":{"operation":"insert","collection":"aifx_news","fields":"={\n  \"title\": \"{{ $json.title }}\",\n  \"date\": ISODate(\"{{ $json.date }}\"),\n  \"summary\": \"{{ $json.summary }}\",\n  \"hint\": \"{{ $json.hint }}\",\n  \"image\": \"{{ $json.image }}\"\n}\n","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.2,"position":[200,-120],"id":"3679d050-4d9c-475a-a5ff-7d1da67ea03f","name":"MongoDB","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}}},{"parameters":{"jsCode":"const oneWeekAgo = new Date();\noneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\nreturn [{ json: { oneWeekAgo } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-20,160],"id":"38eb790e-a1f0-4484-b047-6f994bb22a63","name":"Code1"},{"parameters":{"httpMethod":"POST","path":"noticias","options":{"binaryPropertyName":"data"}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-240,-120],"id":"a824cf23-4081-46c4-b306-e4cd86570a98","name":"Post Webhook insert news","webhookId":"5a5b32f4-53dc-4ed5-a38b-e4509b88518e"},{"parameters":{"path":"noticias","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-240,160],"id":"5e3d8571-ad53-4530-a511-1da5968c2b7f","name":"Get Webhook news","webhookId":"a521454d-154f-429a-b0e9-edb0ee678501"},{"parameters":{"collection":"aifx_news","options":{},"query":"={\n  \"date\": {\n    \"$gte\": \"{{ $json.oneWeekAgo }}\"\n  }\n}"},"type":"n8n-nodes-base.mongoDb","typeVersion":1.2,"position":[200,160],"id":"090cf18c-6d48-4c08-9839-70315e30bb2c","name":"MongoDB1","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}}}],"connections":{"Code":{"main":[[{"node":"MongoDB","type":"main","index":0}]]},"Post Webhook insert news":{"main":[[{"node":"Code","type":"main","index":0}]]},"Get Webhook news":{"main":[[{"node":"Code1","type":"main","index":0}]]},"Code1":{"main":[[{"node":"MongoDB1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"3518f001-b11e-4533-9df3-511f5379462c","triggerCount":0,"tags":[]}