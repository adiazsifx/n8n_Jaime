{"createdAt":"2025-04-22T01:25:03.421Z","updatedAt":"2025-05-27T23:41:53.000Z","id":"gI0QAnugyHC8mbEg","name":"analisys RFP V2","active":false,"isArchived":false,"nodes":[{"parameters":{"formTitle":"Analisis de RFP - RFC","formDescription":"Upload your Document","formFields":{"values":[{"fieldLabel":"Document","fieldType":"file","multipleFiles":false},{"fieldLabel":"Email","fieldType":"email","placeholder":"Escriba el mail a donde enviar el analisis","requiredField":true},{"fieldLabel":"Nombre del Cliente","placeholder":"Escriba el nombre del cliente que envio el RFP","requiredField":true}]},"options":{"appendAttribution":false}},"type":"n8n-nodes-base.formTrigger","typeVersion":2.2,"position":[-1560,-600],"id":"32f36f1a-b432-4e47-802e-a0d712fb572c","name":"On form submission","webhookId":"5125085d-62fd-44cc-81cc-02d25e34efc3","disabled":true},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"leftValue":"={{$json.mimeType}}","rightValue":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","operator":{"type":"string","operation":"equals"},"id":"b7f674dc-b0b2-46ef-a708-f2cd1bc8116e"}],"combinator":"and"},"renameOutput":true,"outputKey":"Word"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"c299e7f1-81fa-4a03-aa67-91b8ed421b02","leftValue":"={{$json.mimeType}}","rightValue":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Excel"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"c2cfac87-d08b-431a-b252-5148c7a944f3","leftValue":"={{$json.mimeType}}","rightValue":"image/","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Image"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"5b390ef4-81dd-4521-8441-93047d436432","leftValue":"={{$json.mimeType}}","rightValue":"=application/pdf","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"pdf"}]},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-480,-220],"id":"580de1fd-6f6f-4863-9fdc-e96faa9b6498","name":"Switch"},{"parameters":{"jsCode":"function formatMarkdownToHtml(markdown) {\n  if (!markdown) return '';\n\n  // Obtener el nombre del cliente del campo especÃ­fico de n8n\n  let clientName = $input.first().json['Nombre del Cliente'] || \"Cliente\";\n\n  // Si el campo de formulario no existe o estÃ¡ vacÃ­o, intentar extraerlo del markdown\n  if (!clientName || clientName === \"Cliente\") {\n    const clientMatch = markdown.match(/\\*\\*\\s*Solicitante:\\s*(.*?)\\s*\\*\\*/);\n    if (clientMatch && clientMatch[1]) {\n      let extractedName = clientMatch[1].split(/\\s+Este nombre/)[0];\n      extractedName = extractedName.split(/\\s+este nombre/)[0];\n      clientName = extractedName.trim();\n    }\n  }\n\n  // Formatear tÃ­tulos principales\n  let html = markdown.replace(/^# (.*?)$/gm, (_, titleText, offset, fullText) => {\n    const index = fullText.slice(0, offset).match(/^# /gm)?.length || 0;\n\n    const styles = [\n      'font-size: 32px; color: #0a1f44; font-weight: 800; margin: 30px 0 12px; padding-bottom: 6px; border-bottom: 3px solid #0071ce; line-height: 1.2; font-family: Segoe UI, Roboto, sans-serif;',\n      'font-size: 28px; color: #123c69; font-weight: 700; margin: 26px 0 10px; padding-bottom: 4px; border-bottom: 2px solid #0071ce; line-height: 1.2;',\n      'font-size: 24px; color: #1a1a1a; font-weight: 600; margin: 22px 0 8px; padding-bottom: 2px; border-bottom: 1px solid #ccc; line-height: 1.2;',\n      'font-size: 22px; color: #333; font-weight: 600; margin: 18px 0 6px; line-height: 1.2;',\n    ];\n\n    const style = styles[Math.min(index, styles.length - 1)];\n    return `<h1 style=\"${style}\">${titleText}</h1>`;\n  });\n\n  // Formatear subtÃ­tulos\n  html = html.replace(/^## (.*?)$/gm, '<h2 style=\"font-size: 18px; color: #041e42; margin-top: 20px; margin-bottom: 10px; border-left: 4px solid #0071ce; padding-left: 10px;\">$1</h2>');\n\n  // Formatear negritas\n  html = html.replace(/\\*\\*(.*?)\\*\\*/g, '<strong style=\"font-weight: bold; color: #041e42;\">$1</strong>');\n\n  // Formatear listas con viÃ±etas\n  html = html.replace(/^- (.*?)$/gm, '<li style=\"margin-bottom: 5px; font-size: 16px;\">$1</li>');\n\n  // Detectar y agrupar elementos de lista en forma segura\n  const lines = html.split('\\n');\n  let result = [];\n  let currentList = [];\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line.startsWith('<li')) {\n      currentList.push(line);\n    } else {\n      if (currentList.length > 0) {\n        result.push('<ul style=\"margin-left: 10px; padding-left: 20px; margin-bottom: 10px;\">');\n        result = result.concat(currentList);\n        result.push('</ul>');\n        currentList = [];\n      }\n      result.push(line);\n    }\n  }\n\n  if (currentList.length > 0) {\n    result.push('<ul style=\"margin-left: 10px; padding-left: 20px; margin-bottom: 10px;\">');\n    result = result.concat(currentList);\n    result.push('</ul>');\n  }\n\n  html = result.join('\\n');\n\n  // Convertir tablas Markdown a HTML\n  html = html.replace(/((?:^\\|.*\\|\\s*\\n?)+)/gm, match => {\n    const rows = match.trim().split('\\n');\n\n    // Separar filas en celdas y limpiar espacios\n    const parsedRows = rows.map(row => row.trim().split('|').filter(cell => cell.trim() !== ''));\n\n    const headers = parsedRows[0];\n    const isDividerRow = row => row.every(cell => /^-+$/.test(cell));\n    const bodyRows = parsedRows.slice(1).filter(row => !isDividerRow(row));\n\n    // Si la Ãºltima cabecera estÃ¡ vacÃ­a, eliminarla\n    const cleanHeaders = headers.filter(h => h.trim() !== '');\n\n    const thead = `<thead><tr>${cleanHeaders.map(h => `<th>${h.trim()}</th>`).join('')}</tr></thead>`;\n    const tbody = `<tbody>${bodyRows.map(row => {\n      return `<tr>${row.slice(0, cleanHeaders.length).map(c => `<td>${c.trim()}</td>`).join('')}</tr>`;\n    }).join('')}</tbody>`;\n\n    return `<table class=\"markdown-table\">${thead}${tbody}</table>`;\n  });\n\n  // Reemplazar saltos de lÃ­nea con <br/>\n  html = html.replace(/\\n/g, '<br/>');\n  html = html.replace(/<\\/h1><br\\/>/g, '</h1>');\n  html = html.replace(/<\\/h2><br\\/>/g, '</h2>');\n  html = html.replace(/<\\/ul><br\\/>/g, '</ul>');\n\n  // HTML Final con estilos IFX\n  const formattedHTML = `\n  <!DOCTYPE html>\n  <html lang=\"es\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Ejemplo 2</title>\n    <style>\n      body {\n        font-family: 'Arial', sans-serif;\n        background-color: #f4f6f8;\n        margin: 0;\n        color: #2c3e50;\n      }\n      .container {\n        max-width: 700px;\n        margin: 40px auto;\n        background: #fff;\n        border-radius: 8px;\n        box-shadow: 0 2px 8px rgba(44,62,80,0.07);\n        padding: 0 0 30px 0;\n      }\n      .header {\n        padding: 40px 40px 20px 40px;\n        border-bottom: 1px solid #e9ecef;\n        text-align: left;\n        background: #232a34;\n        border-radius: 8px 8px 0 0;\n      }\n      .header-row {\n        display: flex;\n        align-items: center;\n        gap: 28px;\n      }\n      .header-titles {\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n      }\n      .header-titles .title,\n      .header-title-main {\n        color: #fff;\n      }\n      .header-titles .title {\n        font-size: 24px;\n        font-weight: 600;\n        margin-bottom: 2px;\n      }\n      .header-title-main {\n        font-size: 28px;\n        font-weight: 700;\n        margin-bottom: 0;\n      }\n      .logo {\n        max-width: 180px;\n        height: auto;\n        margin-bottom: 20px;\n      }\n      .markdown-table {\n        border-collapse: collapse;\n        width: 100%;\n        margin: 20px 0;\n        font-size: 14px;\n      }\n      .markdown-table th,\n      .markdown-table td {\n        border: 1px solid #ccc;\n        padding: 8px 12px;\n        text-align: left;\n      }\n      .markdown-table th {\n        background-color: #0071ce;\n        color: #fff;\n      }\n      .markdown-table tr:nth-child(even) td {\n        background-color: #f9f9f9;\n      }\n      .footer {\n        background: #232a34;\n        color: #e0e0e0;\n        padding: 32px 40px 24px 40px;\n        border-radius: 0 0 8px 8px;\n        font-size: 13px;\n        text-align: left;\n        margin-top: 32px;\n      }\n      .footer-logo {\n        max-width: 110px;\n        height: auto;\n        margin-bottom: 10px;\n      }\n      .footer-title {\n        font-weight: 700;\n        color: #fff;\n        margin-bottom: 4px;\n        font-size: 15px;\n      }\n      .footer-row {\n        display: flex;\n        gap: 32px;\n        margin-top: 12px;\n      }\n      .footer-info {\n        flex: 1;\n        min-width: 0;\n        line-height: 1.7;\n        margin-top: 0;\n        font-size: 13px;\n        color: #e0e0e0;\n      }\n    </style>\n  </head>\n  <body>\n    <div class=\"container\">\n      <div class=\"header\">\n        <div class=\"header-row\">\n          <img src=\"https://ifxnetworks.com/hubfs/IFX/logo-ifx--primary.svg\" alt=\"IFX Networks\" class=\"logo\">\n          <div class=\"header-titles\">\n            <div class=\"title\">Ejemplo 2</div>\n            <div class=\"header-title-main\">SubtÃ­tulo o nombre de proyecto</div>\n          </div>\n        </div>\n        <div style=\"font-size:15px; color:#d2d2d2; margin-bottom:10px;\">\n          Breve descripciÃ³n del propÃ³sito de este documento.\n        </div>\n      </div>\n      <div class=\"markdown-content\" style=\"padding: 30px 40px;\">\n        ${html}\n      </div>\n      <div class=\"footer\">\n        <img src=\"https://ifxnetworks.com/hubfs/IFX/logo-ifx--primary.svg\" alt=\"IFX Networks\" class=\"footer-logo\">\n        <div class=\"footer-title\">IFX Networks</div>\n        <div class=\"footer-row\">\n          <div class=\"footer-info\">\n            25 aÃ±os de experiencia en el mercado de las Telecomunicaciones.\n          </div>\n          <div class=\"footer-info\">\n            Diagonal 97 No. 17 â€“ 60 piso 4<br>\n            Edificio Centro Empresarial Corporativo<br>\n            BogotÃ¡, Colombia\n          </div>\n          <div class=\"footer-info\">\n            +57 (601) 369 3000<br>\n            CARE: +57 (601) 369 3024\n          </div>\n        </div>\n      </div>\n    </div>\n  </body>\n  </html>`;\n\n  return formattedHTML;\n}\n\n// Obtener el texto markdown de la entrada\nconst markdownText = $input.first().json.markdown;\n\n// Convertir markdown a HTML\nconst formattedHtml = formatMarkdownToHtml(markdownText);\n\n// Devolver los resultados como un array de objetos\nreturn [\n  {\n    json: {\n      markdownText: markdownText,\n      formattedHtml: formattedHtml,\n      plainText: \"Este correo contiene HTML formateado. Si no puede verlo correctamente, utilice un cliente de correo que soporte HTML.\"\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2160,260],"id":"229d9c96-5e3e-4550-af89-65d8166a4883","name":"Convert to HTML"},{"parameters":{"errorMessage":"Error Processing Document"},"type":"n8n-nodes-base.stopAndError","typeVersion":1,"position":[1040,-280],"id":"3a909b8c-9ab5-45a4-8f63-3031d477c1d9","name":"Error PDF"},{"parameters":{"toRecipients":"={{ $('Webhook').item.json.body.email }}","subject":"=Resumen RFP {{ $('Webhook').item.json.body.empresa }}","bodyContent":"={{ $json.formattedHtml }}","additionalFields":{"bodyContentType":"html"}},"type":"n8n-nodes-base.microsoftOutlook","typeVersion":2,"position":[2800,260],"id":"6fcca0c1-4f23-4388-87f8-e5cab3e3b859","name":"Send Mail","webhookId":"4d4b099c-c77e-49cd-924d-254b0d51e936","credentials":{"microsoftOutlookOAuth2Api":{"id":"zrNdsL9SZMvBfPt3","name":"Microsoft Outlook cbautista"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"6b32d09d-aca1-4ac2-add0-08fddb408eef","leftValue":"={{ $json.status }}","rightValue":"ERROR","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"ERROR"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"728cff21-b861-4c35-a66f-1159958560fb","leftValue":"={{ $json.status }}","rightValue":"CANCELED","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"CANCELED"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.status }}","rightValue":"SUCCESS","operator":{"type":"string","operation":"equals"},"id":"1ca170e5-f79b-45d0-bf06-8817aaa91020"}],"combinator":"and"},"renameOutput":true,"outputKey":"SUCCESS"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"8ed9a7f3-a77b-4541-a2c5-1ec659349c4c","leftValue":"={{ $json.status }}","rightValue":"PENDING","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PENDING"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[520,-80],"id":"a168c71e-ce91-4faf-8d78-21332d899fc3","name":"Status Process"},{"parameters":{"promptType":"define","text":"={{ $json.markdown }}","messages":{"messageValues":[{"message":"Me puedes hacer que se extraiga el nombre del solicitante o cliente encontrando la informacion en el texto y que lo llama como \"solicitante: cliente XYZ\"\n\nEste es el prompt actual\nEres un analista experto en contrataciÃ³n de servicios de telecomunicaciones. RecibirÃ¡s el contenido completo de un documento tipo RFP (Request for Proposal).\n\nðŸŽ¯ TU TAREA ES LEER Y ANALIZAR el documento COMPLETO y entregar una respuesta organizada en FORMATO MARKDOWN, bien estructurada y detallada, con secciones y subtÃ­tulos.\nðŸ’¡ DEBES EXTRAER Y EXPLICAR la informaciÃ³n mÃ¡s relevante posible, agrupada en las siguientes secciones:\n## ðŸ” InformaciÃ³n Legal y Contractual\nExpÃ³n con claridad las condiciones legales clave: duraciÃ³n del contrato, causales de terminaciÃ³n, condiciones de renovaciÃ³n, garantÃ­as requeridas, clÃ¡usulas de confidencialidad, penalizaciones y cualquier tÃ©rmino jurÃ­dico relevante. Si hay ambigÃ¼edades o riesgos, comÃ©ntalos brevemente.\n## ðŸ’¼ Aspectos Administrativos y EconÃ³micos\nDetalla fechas importantes (lÃ­mite de entrega, vigencia de oferta), plazos de pago, condiciones econÃ³micas (moneda, forma de pago, intereses, anticipos), asÃ­ como montos, promedios o unidades de cobro mencionadas. AÃ±ade cualquier instrucciÃ³n relacionada con facturaciÃ³n, penalidades econÃ³micas o restricciones.\n## ðŸ“‘ Requisitos Documentales\nLista y explica los documentos requeridos: referencias, certificaciones, declaraciones juradas, anexos tÃ©cnicos, formularios, etc. Aclara condiciones como: cantidad, antigÃ¼edad, formato, requisitos de firma o certificaciÃ³n, si deben presentarse en fÃ­sico o digital.\n## ðŸ› ï¸ Requerimiento TÃ©cnico (Resumen Detallado)\nHaz un resumen tÃ©cnico exhaustivo. Incluye tecnologÃ­as especÃ­ficas (SD-WAN, plataformas, software), infraestructura mÃ­nima, disponibilidad exigida, condiciones de escalabilidad, redundancias, niveles de servicio (SLA), seguridad fÃ­sica y lÃ³gica, cantidad de sitios, equipos o instalaciones.\n## âœ… Ãndice y Tablas\n- Si se encuentran tablas, asegÃºrate de que todas las tablas estÃ©n bien estructuradas, con los **encabezados correctamente alineados** y **sin celdas vacÃ­as** en la cabecera.\n- **Tablas en Markdown** deben tener un formato como el siguiente:\n  ```markdown\n  | Columna 1 | Columna 2 | Columna 3 |\n  |-----------|-----------|-----------|\n  | Valor 1   | Valor 2   | Valor 3   |\n  | Valor 4   | Valor 5   | Valor 6   |\n\nðŸŽ¯ Instrucciones especÃ­ficas:\nPara las Tablas: Si encuentras tablas, asegÃºrate de que estÃ©n estructuradas con los siguientes lineamientos:\n# Usa siempre las | para separar las columnas.\n# AsegÃºrate de que todas las filas de datos tengan el mismo nÃºmero de columnas que la fila de encabezado.\n# Si alguna celda estÃ¡ vacÃ­a en el texto original, reemplÃ¡zala con un espacio vacÃ­o y no dejes columnas extraÃ±as.\n# Para las ImÃ¡genes: Las imÃ¡genes deben ser referenciadas correctamente con la sintaxis Markdown estÃ¡ndar:\n# AsegÃºrate de que las imÃ¡genes estÃ©n dentro de la estructura Markdown y que los links a las imÃ¡genes sean completos (incluyendo el dominio).\n# Formato Markdown claro y consistente:\n# Utiliza encabezados #, ##, ### para los tÃ­tulos y subtÃ­tulos.\n# Usa listas ordenadas y desordenadas segÃºn corresponda.\n# Si se encuentran enlaces o menciones de URL, inclÃºyelas en el formato Markdown adecuado.\n\nðŸ”Ž ADEMÃS, para cada secciÃ³n debes:\n- Citar cifras exactas, porcentajes, valores tÃ©cnicos o econÃ³micos que aparezcan  \n- Incluir aclaraciones sobre el contexto si hay ambigÃ¼edad o tÃ©rminos no definidos  \n- Mencionar si hay inconsistencias, ambigÃ¼edades o puntos crÃ­ticos  \n- Usar listas ordenadas o viÃ±etas cuando sea necesario para mayor claridad\n\nðŸš« IMPORTANTE:  \nNO entregues respuesta en JSON  \nNO utilices etiquetas de cÃ³digo  \nNO incluyas texto fuera del formato Markdown estructurado\nNO dejes celdas vacÃ­as o desajustadas en las tablas, asegÃºrate de que el formato sea adecuado para la conversiÃ³n a HTML\nðŸ“Œ OBJETIVO FINAL: Producir un INFORME CLARO, COMPLETO Y ANALÃTICO en Markdown, con subtÃ­tulos, Ã­conos y explicaciones precisas por secciÃ³n.\n\nðŸ“˜ FORMATO DE RESPUESTA ESPERADO EN MARKDOWN OBLIGATORIO MANTENER LA ESTRUCTURA\n## ðŸ” InformaciÃ³n Legal y Contractual\n- Extraer el nombre del solicitante del RFP, regularmente es el nombre de alguna empresa, entidad o compaÃ±ia\n- El contrato tendrÃ¡ una duraciÃ³n de 60 meses, con posibilidad de renovaciÃ³n automÃ¡tica si ninguna de las partes manifiesta lo contrario con al menos 90 dÃ­as de anticipaciÃ³n.\n- Se exige una garantÃ­a de cumplimiento equivalente al 15% del valor anual del contrato, renovable cada aÃ±o antes del aniversario del contrato.\n- El proveedor debe firmar un acuerdo de confidencialidad (NDA) previo a la ejecuciÃ³n del contrato.\n- Se establecen penalidades por incumplimiento que podrÃ¡n alcanzar hasta el 10% del monto mensual facturado, dependiendo de la gravedad del incidente.\n## ðŸ’¼ Aspectos Administrativos y EconÃ³micos\n- La propuesta debe entregarse antes del **24 de enero de 2025 a las 13:00 (UTC-6)**.\n- La oferta deberÃ¡ tener una vigencia mÃ­nima de **180 dÃ­as** a partir de la fecha de apertura de propuestas.\n- Los pagos se realizarÃ¡n en **USD**, con un plazo mÃ¡ximo de **60 dÃ­as calendario** tras la aceptaciÃ³n del servicio.\n- No se permiten pagos anticipados, intereses moratorios ni ajustes por inflaciÃ³n.\n- Costo estimado mensual por sitio: **$2,500 USD** promedio.\n- No se contempla la entrega parcial del servicio; el contrato serÃ¡ adjudicado en una sola partida.\n## ðŸ“‘ Requisitos Documentales\n- Se deben presentar al menos **3 cartas de referencia** de clientes actuales o anteriores, emitidas en los Ãºltimos **2 aÃ±os**.\n- Certificaciones obligatorias: **ISO 27001**, **PCI-DSS**, y **Uptime Institute TIER III (Design y Facility)**.\n- Documentos requeridos: memoria tÃ©cnica, plan de trabajo detallado, declaraciÃ³n jurada firmada por el representante legal.\n- Todos los documentos deben entregarse en formato digital firmado electrÃ³nicamente, ademÃ¡s de una copia impresa legalizada.\n- Se solicita presentar un organigrama tÃ©cnico del equipo propuesto, con CVs del personal clave.\n## ðŸ› ï¸ Requerimiento TÃ©cnico (Resumen Detallado)\n- La soluciÃ³n deberÃ¡ operar sobre una plataforma **SD-WAN basada en VMware VeloCloud**, con enlaces de comunicaciÃ³n redundantes en cada sitio.\n- Se exige una **disponibilidad mÃ­nima de 99.982%**, respaldada por monitoreo y soporte **24x7x365**.\n- Capacidad inicial de instalaciÃ³n: **20 racks**, con posibilidad de expansiÃ³n a **30 racks** dentro de un periodo de **3 aÃ±os**.\n- Redundancia requerida: **N+1** en energÃ­a, climatizaciÃ³n y enlaces.\n- Seguridad fÃ­sica: acceso biomÃ©trico, cÃ¡maras CCTV, jaulas Faraday y zonas de cuarentena.\n- Todos los sitios deberÃ¡n contar con doble acometida de fibra Ã³ptica y equipos con soporte para IPv6.\n## âœ…  Observaciones y Recomendaciones\n- Se recomienda verificar que la vigencia de las certificaciones solicitadas coincida con la duraciÃ³n total del contrato.\n- Ideal contar con experiencia comprobable en implementaciÃ³n de soluciones SD-WAN en al menos **10 sitios simultÃ¡neamente**.\n- Se sugiere solicitar aclaraciÃ³n sobre el tÃ©rmino â€œexpansiÃ³n futuraâ€ para establecer lÃ­mites de alcance o costos adicionales.\n- SerÃ­a Ãºtil definir explÃ­citamente los criterios de evaluaciÃ³n tÃ©cnica y econÃ³mica dentro del documento para mayor transparencia.\n## âš ï¸ Riesgos Identificados\n- AmbigÃ¼edad en la clÃ¡usula de renovaciÃ³n automÃ¡tica: no se especifican condiciones de renegociaciÃ³n tarifaria.\n- Posible sobrecosto si no se delimitan las condiciones bajo las cuales se puede activar la expansiÃ³n a 30 racks.\n- No se detalla el mecanismo de validaciÃ³n de la disponibilidad mÃ­nima exigida (99.982%), lo que podrÃ­a generar disputas contractuales.\n- Falta claridad sobre si el incumplimiento tÃ©cnico parcial implica rescisiÃ³n total del contrato o aplicaciÃ³n de penalidades proporcionales."}]}},"type":"@n8n/n8n-nodes-langchain.chainLlm","typeVersion":1.6,"position":[1140,40],"id":"3baa4eea-69c4-4abc-a758-5aed8ca6a122","name":"Analizando Documento","disabled":true},{"parameters":{"operation":"completion","completionTitle":"Error en el Analisis","completionMessage":"=el Analisis del documento ** {{ $('On form submission').item.json.Document.filename }} **\nPresento un error en su procesamiento, por favor intente de nuevo el proceso.","limitWaitTime":true,"resumeUnit":"minutes","options":{}},"type":"n8n-nodes-base.form","typeVersion":1,"position":[820,-200],"id":"e5eb6787-411e-45fc-aafe-4e4f0fdd27bf","name":"Form Error","webhookId":"672dd2c6-3c4d-472e-a14e-ea16a65e965b"},{"parameters":{"method":"POST","url":"https://api.cloud.llamaindex.ai/api/parsing/upload","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"parameterType":"formBinaryData","name":"file","inputDataFieldName":"={{ $('Separar Documentos').all().first().binary.Document0 }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[140,-220],"id":"31778906-6f22-4057-bbac-80a245a7b0a3","name":"Parser Documento","credentials":{"httpHeaderAuth":{"id":"T8quSeWOL90AppRG","name":"Header Auth account 2"}}},{"parameters":{"url":"=https://api.cloud.llamaindex.ai/api/v1/parsing/job/{{ $json.id }}/result/markdown","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{"redirect":{"redirect":{}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[820,-40],"id":"a1c77ac5-4553-4b1a-89b3-fe96f9776124","name":"Success Document","credentials":{"httpHeaderAuth":{"id":"T8quSeWOL90AppRG","name":"Header Auth account 2"}}},{"parameters":{"amount":3},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[460,420],"id":"2074b904-e00d-486d-ba24-b48d5107c20b","name":"Wait Process Document","webhookId":"f2ebea6a-82b1-44b0-88ea-6f80826d99f9"},{"parameters":{"url":"=https://api.cloud.llamaindex.ai/api/v1/parsing/job/{{ $json.id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[280,-60],"id":"6db58a68-5034-4972-af1f-3895ce9276ab","name":"GET Parser Document","credentials":{"httpHeaderAuth":{"id":"T8quSeWOL90AppRG","name":"Header Auth account 2"}}},{"parameters":{"operation":"completion","completionTitle":"Analisis Finalizado","completionMessage":"=El Analisis del documento\n** {{ $('On form submission').item.json.Document.filename }} **\na finalizado y el resultado fue enviado a\n{{ $('On form submission').item.json.Email }}","limitWaitTime":true,"resumeUnit":"minutes","options":{}},"type":"n8n-nodes-base.form","typeVersion":1,"position":[3140,460],"id":"d478e459-90c6-437d-8720-8154568fbce6","name":"Finish Success","webhookId":"672dd2c6-3c4d-472e-a14e-ea16a65e965b","disabled":true},{"parameters":{"model":{"__rl":true,"value":"llama-4-Scout","mode":"list","cachedResultName":"llama-4-Scout"},"options":{"temperature":0.3}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1160,280],"id":"f7a17dfd-ae0e-460d-9e22-5e4630437382","name":"GPT-4.1-Nano","credentials":{"openAiApi":{"id":"S46eGA7oXnm2SZCZ","name":"OpenAi account 2"}}},{"parameters":{"httpMethod":"POST","path":"parse-rfp","responseMode":"=onReceived","options":{"binaryPropertyName":"Document"}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-1580,-320],"id":"3420b700-9ab9-42ff-96df-34ae99a12d21","name":"Webhook","webhookId":"90fd164e-74ce-4bc0-a8e2-6a3f3d3f1ec9"},{"parameters":{"operation":"insert","collection":"analyses","fields":"={\n  \"compania\": \"{{ $('Webhook').item.json.body.empresa }}\",\n  \"nombreArchivo\": \"{{ $('Webhook').item.json.body.empresa }}_{{ new Date().toISOString() }}\", \n  \"archivoMarkdown\": \"{{ $input.item.json.markdown }}\",\n  \"fecha\": \"{{ new Date().toISOString() }}\",\n  \"sessionId\":{{ $('Inicio de sesion').item.json.session_id }}\n  \"tipoDocumento\": \"RFP\",\n  \"version\": \"1.0\"\n}\n","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.1,"position":[2140,840],"id":"5f7d9849-9919-40a2-9fa7-689733af819c","name":"MongoDB","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}},"disabled":true},{"parameters":{"collection":"analyses","options":{},"query":"{ \"_id\":\"680aba2baf724207a4adc9bc\" }"},"type":"n8n-nodes-base.mongoDb","typeVersion":1.1,"position":[2340,840],"id":"a7cbe974-39d4-46df-80c3-99fe703461bb","name":"MongoDB1","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}},"disabled":true},{"parameters":{"assignments":{"assignments":[{"id":"115f2cf6-9653-46be-b973-53c9c8317d16","name":"session_id","value":"={{ $json.session_id }}","type":"string"},{"id":"6ab72819-a7ba-4617-bfbf-604c2db3a280","name":"step","value":"\"inicio-analisis\"","type":"string"},{"id":"d43b5655-1869-4630-8186-8a47c9d2f558","name":"timestamp","value":"","type":"string"},{"id":"e6e7c994-08b0-4019-8f93-cab2e6d0277f","name":"timestamp","value":"={{ $now.toString() }}","type":"string"},{"id":"687eff2a-f4d6-4b99-83b2-39d5519d8e0b","name":"estado","value":"\"Recibido y validado\"","type":"string"},{"id":"e3551a38-45fb-4b93-acab-0ff4a155fb11","name":"nombre_pdf","value":"= {{ $binary.Document0.fileName }}_{{ $now.toString() }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-940,-180],"id":"0a22ca75-1579-4c38-b39b-f2b5135b03a4","name":"Edit Fields"},{"parameters":{"operation":"insert","collection":"analyses","fields":"={\n  \"compania\": \"{{ $('Webhook').item.json.body.empresa }}\",\n  \"nombreArchivo\": \"{{ $('Webhook').item.json.body.empresa }}_{{ new Date().toISOString() }}\", \n  \"archivoMarkdown\": \"{{ $input.item.json.markdown }}\",\n  \"fecha\": \"{{ new Date().toISOString() }}\",\n  \"tipoDocumento\": \"RFP\",\n  \"version\": \"1.0\"\n}\n","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.1,"position":[-740,-80],"id":"f4c4c09d-e45c-4197-82a4-c07209c4e057","name":"MongoDB2","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}},"disabled":true},{"parameters":{"assignments":{"assignments":[{"id":"115f2cf6-9653-46be-b973-53c9c8317d16","name":"session_id","value":"={{ $('Inicio de sesion').item.json.session_id }}","type":"string"},{"id":"6ab72819-a7ba-4617-bfbf-604c2db3a280","name":"step","value":"anÃ¡lisis IA","type":"string"},{"id":"d43b5655-1869-4630-8186-8a47c9d2f558","name":"timestamp","value":"","type":"string"},{"id":"e6e7c994-08b0-4019-8f93-cab2e6d0277f","name":"timestamp","value":"={{ $now.toString() }}","type":"string"},{"id":"687eff2a-f4d6-4b99-83b2-39d5519d8e0b","name":"estado","value":"\"enviado a analizar a IA \"","type":"string"},{"id":"e3551a38-45fb-4b93-acab-0ff4a155fb11","name":"nombre_pdf","value":"={{ $('Inicio de sesion').item.json.session_id }}_{{ $now.toString() }}","type":"string"},{"id":"6b06d78a-1e8e-4e83-94f4-367760da6f4f","name":"resumen","value":"={{ $json.markdown }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1040,100],"id":"8b16f4c8-9444-4cc6-b3bf-5afb6803278b","name":"Edit Fields1"},{"parameters":{"operation":"insert","collection":"analyses","fields":"={\n  \"compania\": \"{{ $('Webhook').item.json.body.empresa }}\",\n  \"nombreArchivo\": \"{{ $('Webhook').item.json.body.empresa }}_{{ new Date().toISOString() }}\", \n  \"archivoMarkdown\": \"{{ $input.item.json.markdown }}\",\n  \"fecha\": \"{{ new Date().toISOString() }}\",\n  \"tipoDocumento\": \"RFP\",\n  \"version\": \"1.0\"\n}\n","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.1,"position":[1040,360],"id":"d995269a-2700-482c-bac0-a98f843942d8","name":"MongoDB3","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}},"disabled":true},{"parameters":{"assignments":{"assignments":[{"id":"115f2cf6-9653-46be-b973-53c9c8317d16","name":"session_id","value":"={{ $json.session_id }}","type":"string"},{"id":"6ab72819-a7ba-4617-bfbf-604c2db3a280","name":"step","value":"\"error\"","type":"string"},{"id":"d43b5655-1869-4630-8186-8a47c9d2f558","name":"timestamp","value":"","type":"string"},{"id":"e6e7c994-08b0-4019-8f93-cab2e6d0277f","name":"timestamp","value":"={{ $now.toString() }}","type":"string"},{"id":"687eff2a-f4d6-4b99-83b2-39d5519d8e0b","name":"estado","value":"el Analisis del documento ** {{ $('On form submission').item.json.Document.filename }} ** Presento un error en su procesamiento, por favor intente de nuevo el proceso.","type":"string"},{"id":"e3551a38-45fb-4b93-acab-0ff4a155fb11","name":"nombre_pdf","value":"={{ $('Inicio de sesion').item.json.session_id }}_{{ $now.toString() }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1060,-500],"id":"ddc5f063-6b97-4bfa-837e-3080e018678c","name":"Edit Fields2"},{"parameters":{"operation":"insert","collection":"analyses","fields":"={\n  \"compania\": \"{{ $('Webhook').item.json.body.empresa }}\",\n  \"nombreArchivo\": \"{{ $('Webhook').item.json.body.empresa }}_{{ new Date().toISOString() }}\", \n  \"archivoMarkdown\": \"{{ $input.item.json.markdown }}\",\n  \"fecha\": \"{{ new Date().toISOString() }}\",\n  \"tipoDocumento\": \"RFP\",\n  \"version\": \"1.0\"\n}\n","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.1,"position":[1220,-500],"id":"2201f7cf-5a80-4fe6-b0f0-460bcc5481b8","name":"MongoDB4","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}},"disabled":true},{"parameters":{"assignments":{"assignments":[{"id":"115f2cf6-9653-46be-b973-53c9c8317d16","name":"session_id","value":"={{ $('Inicio de sesion').item.json.session_id }}","type":"string"},{"id":"6ab72819-a7ba-4617-bfbf-604c2db3a280","name":"step","value":"\"envio de email\"","type":"string"},{"id":"d43b5655-1869-4630-8186-8a47c9d2f558","name":"timestamp","value":"","type":"string"},{"id":"e6e7c994-08b0-4019-8f93-cab2e6d0277f","name":"timestamp","value":"={{ $now.toString() }}","type":"string"},{"id":"687eff2a-f4d6-4b99-83b2-39d5519d8e0b","name":"estado","value":"enviado por email ","type":"string"},{"id":"e3551a38-45fb-4b93-acab-0ff4a155fb11","name":"nombre_pdf","value":"={{ $('Inicio de sesion').item.json.session_id }}_{{ $now.toString() }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[3140,0],"id":"b728b3e0-ee4e-48f3-a036-78596c1c3cac","name":"Edit Fields3","disabled":true},{"parameters":{"operation":"insert","collection":"analyses","fields":"={\n  \"compania\": \"{{ $('Webhook').item.json.body.empresa }}\",\n  \"nombreArchivo\": \"{{ $('Webhook').item.json.body.empresa }}_{{ new Date().toISOString() }}\", \n  \"archivoMarkdown\": \"{{ $input.item.json.markdown }}\",\n  \"fecha\": \"{{ new Date().toISOString() }}\",\n  \"tipoDocumento\": \"RFP\",\n  \"version\": \"1.0\"\n}\n","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.1,"position":[3420,0],"id":"c0c067ce-0bee-4b0f-916c-a318a98802a1","name":"MongoDB5","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}},"disabled":true},{"parameters":{"jsCode":"const intentosMaximos = 10;\nconst intentoActual = $json.intento || 1;\n\nif (intentoActual > intentosMaximos) {\n  throw new Error('Se alcanzÃ³ el lÃ­mite de reintentos');\n}\n\nreturn items.map(item => ({\n  json: {\n    ...item.json,\n    intento: intentoActual + 1\n  }\n}));\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[460,220],"id":"6056ce5d-5a6d-4bbc-9e72-72a48bb4f00d","name":"contador de reintentos"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f336ff44-ae3a-45a7-907b-4ef304a741cb","leftValue":"={{ $json.formattedHtml }}","rightValue":"","operator":{"type":"string","operation":"notEmpty","singleValue":true}},{"id":"3212c3fe-3cdb-4d04-a400-51b307372b11","leftValue":"={{ $json.formattedHtml }}","rightValue":"error","operator":{"type":"string","operation":"notContains"}},{"id":"0336095c-5b73-445e-9cf4-351848a9b4c8","leftValue":"={{ $json.formattedHtml }}","rightValue":"undefined","operator":{"type":"string","operation":"notContains"}},{"id":"fe665b60-9bde-4cda-b9da-0a0d4f3cf0a7","leftValue":"={{ $json.formattedHtml }}","rightValue":"null","operator":{"type":"string","operation":"notContains"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2380,480],"id":"c70c26e3-080a-4bad-a876-b7f26d66f0a4","name":"If1","disabled":true},{"parameters":{"errorMessage":"Error Processing Document"},"type":"n8n-nodes-base.stopAndError","typeVersion":1,"position":[2560,640],"id":"ccf15a59-8b10-4a52-b701-86e8c10b299c","name":"Error PDF2","disabled":true},{"parameters":{"jsCode":"// Genera un session_id tipo: \"20240519-168957-a8f23\"\nconst timestamp = new Date().toISOString().replace(/[-:.TZ]/g, '').slice(0, 14);\nconst random = Math.floor(Math.random() * 1000000).toString().padStart(6, '0');\nconst sessionId = `session-${timestamp}-${random}`;\n\nreturn items.map(item => ({\n  json: {\n    ...item.json,\n    session_id: sessionId\n  },\n  binary: item.binary\n}));\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1160,-320],"id":"1c875467-3107-408a-bc0c-21ab148e5093","name":"Inicio de sesion"},{"parameters":{"jsCode":"const resumen = $json.resumen || '';\nconst escapeHtml = (unsafe) =>\n  unsafe\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n\nreturn [\n  {\n    json: {\n      ...$json,\n      resumen_html: `<div>${escapeHtml(resumen)}</div>`\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2460,260],"id":"38cb627f-9cb6-4894-9827-7a4f0fd7a5fa","name":"Code"},{"parameters":{"jsCode":"// Iteramos sobre los archivos recibidos\nconst files = $input.all();\n\nconst maxFileSize = 20 * 1024 * 1024; // 20MB en bytes\nconst maxFiles = 6;  // NÃºmero mÃ¡ximo de archivos por sesiÃ³n\n\n// Verificamos el nÃºmero de archivos\nif (files.length > maxFiles) {\n  throw new Error(`Se permiten un mÃ¡ximo de ${maxFiles} archivos por sesiÃ³n.`);\n}\n\n// Verificamos el tamaÃ±o de cada archivo\nfor (let i = 0; i < files.length; i++) {\n  const file = files[i];\n  \n  if (file.binary && file.binary.data) {\n    const fileSize = Buffer.byteLength(file.binary.data);\n    \n    if (fileSize > maxFileSize) {\n      throw new Error(`El archivo ${file.json.fileName} excede el tamaÃ±o mÃ¡ximo de 20MB.`);\n    }\n  }\n}\n\nreturn items; // Continuamos con el flujo si todo estÃ¡ bien\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1360,-320],"id":"5083ce14-890b-4f39-8494-902f2fe7fdfc","name":"Evaluacion # files , peso de archivos"},{"parameters":{"batchSize":2,"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[-720,-360],"id":"542eb21b-e7f7-4a23-8616-84fa6e4513d3","name":"Loop Over Items","alwaysOutputData":false},{"parameters":{"operation":"insert","collection":"prueba_rfp","fields":"={\n  \"compania\": \"{{ $('Webhook').item.json.body.empresa }}\",\n  \"nombreArchivo\": \"{{ $('Webhook').item.json.body.empresa }}_{{ new Date().toISOString() }}\", \n  \"archivoMarkdown\": \"{{ $input.item.json.markdown }}\",\n  \"fecha\": \"{{ new Date().toISOString() }}\",\n  \"tipoDocumento\": \"RFP\",\n  \"version\": \"1.0\"\n}\n","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.1,"position":[1160,-40],"id":"fd830759-6142-4ccd-aea0-843b2e69d99a","name":"Save_Summary_Data","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}}},{"parameters":{"assignments":{"assignments":[{"id":"115f2cf6-9653-46be-b973-53c9c8317d16","name":"session_id","value":"=","type":"string"},{"id":"6ab72819-a7ba-4617-bfbf-604c2db3a280","name":"step","value":"anÃ¡lisis IA","type":"string"},{"id":"d43b5655-1869-4630-8186-8a47c9d2f558","name":"timestamp","value":"","type":"string"},{"id":"e6e7c994-08b0-4019-8f93-cab2e6d0277f","name":"timestamp","value":"={{ $now.toString() }}","type":"string"},{"id":"687eff2a-f4d6-4b99-83b2-39d5519d8e0b","name":"estado","value":"\"enviado a analizar a IA \"","type":"string"},{"id":"e3551a38-45fb-4b93-acab-0ff4a155fb11","name":"nombre_pdf","value":"={{ $('Inicio de sesion').item.json.session_id }}_{{ $now.toString() }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-460,-440],"id":"bf8fb75f-86ce-467b-8db9-abe23a11692f","name":"Edit Fields4"},{"parameters":{"mode":"insert","qdrantCollection":{"__rl":true,"mode":"list","value":""},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","typeVersion":1.1,"position":[1160,-220],"id":"c7a6becc-f459-48f1-9b1c-8fdaf4039fed","name":"Qdrant Vector Store","credentials":{"qdrantApi":{"id":"RHA3vcrOm5VwmYlq","name":"QdrantApi account"}},"disabled":true},{"parameters":{"jsCode":"/**\n * Este nodo debe ejecutarse en modo â€œRun Once for All Itemsâ€\n * (Output: Many â†’ 1-n).\n */\n\n/* ------------------------------------------------------------------\n   1. Tomamos el primer item de la entrada (contiene todos los binarios)\n------------------------------------------------------------------- */\nconst inputItem   = $input.first();\nconst binaryDocs  = inputItem.binary;          // { Document0, Document1, â€¦ }\nconst baseJson    = inputItem.json;            // metadatos que ya traÃ­a\nconst sessionId   = baseJson.session_id        // ya existeâ€¦\n                  || `session-${Date.now()}`;  // â€¦o generamos uno\n\n/* ------------------------------------------------------------------\n   2. Creamos un item por cada archivo binario\n------------------------------------------------------------------- */\nconst newItems = Object.entries(binaryDocs).map(([fieldName, bin]) => {\n\n\t// clon profundo para NO perder la propiedad data\n\tconst clonedBinary = JSON.parse(JSON.stringify(bin));\n\n\treturn {\n\t\tjson: {\n\t\t\t...baseJson,\n\t\t\tsession_id   : sessionId,\n\t\t\tdocument_name: clonedBinary.fileName,\n\t\t\tmimeType     : clonedBinary.mimeType,\n\t\t\tbinaryField  : fieldName,          // Â«Document0Â», Â«Document1Â», etc.\n\t\t},\n\t\tbinary: {\n\t\t\t[fieldName]: clonedBinary         // el binario completo\n\t\t}\n\t};\n});\n\n/* ------------------------------------------------------------------\n   3. Devolvemos los nuevos items; cada uno mantiene su propio binario\n------------------------------------------------------------------- */\nreturn newItems;\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-940,-360],"id":"19debab6-ea5e-49ea-9c60-b66a28f24726","name":"Separar Documentos"},{"parameters":{"operation":"pdf","binaryPropertyName":"={{ $('Loop Over Items'). }}","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-180,-40],"id":"2d9deddc-534a-4a03-aaa7-93a9b3246c68","name":"Extract from File"}],"connections":{"On form submission":{"main":[[]]},"Switch":{"main":[[{"node":"Parser Documento","type":"main","index":0}],[{"node":"Parser Documento","type":"main","index":0}],[{"node":"Parser Documento","type":"main","index":0}],[{"node":"Extract from File","type":"main","index":0},{"node":"Parser Documento","type":"main","index":0}]]},"Convert to HTML":{"main":[[{"node":"If1","type":"main","index":0},{"node":"Code","type":"main","index":0}]]},"Send Mail":{"main":[[{"node":"Finish Success","type":"main","index":0},{"node":"Edit Fields3","type":"main","index":0}]]},"Status Process":{"main":[[{"node":"Form Error","type":"main","index":0}],[{"node":"Form Error","type":"main","index":0}],[{"node":"Success Document","type":"main","index":0}],[{"node":"contador de reintentos","type":"main","index":0}]]},"Analizando Documento":{"main":[[{"node":"MongoDB","type":"main","index":0},{"node":"Convert to HTML","type":"main","index":0}]]},"Form Error":{"main":[[{"node":"Error PDF","type":"main","index":0},{"node":"Edit Fields2","type":"main","index":0}]]},"Parser Documento":{"main":[[{"node":"GET Parser Document","type":"main","index":0}]]},"Success Document":{"main":[[{"node":"Edit Fields1","type":"main","index":0},{"node":"Save_Summary_Data","type":"main","index":0}]]},"Wait Process Document":{"main":[[{"node":"GET Parser Document","type":"main","index":0}]]},"GET Parser Document":{"main":[[{"node":"Status Process","type":"main","index":0}]]},"GPT-4.1-Nano":{"ai_languageModel":[[{"node":"Analizando Documento","type":"ai_languageModel","index":0}]]},"Webhook":{"main":[[{"node":"Evaluacion # files , peso de archivos","type":"main","index":0}]]},"MongoDB":{"main":[[{"node":"MongoDB1","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"MongoDB2","type":"main","index":0}]]},"Edit Fields1":{"main":[[{"node":"MongoDB3","type":"main","index":0}]]},"Edit Fields2":{"main":[[{"node":"MongoDB4","type":"main","index":0}]]},"Edit Fields3":{"main":[[{"node":"MongoDB5","type":"main","index":0}]]},"contador de reintentos":{"main":[[{"node":"Wait Process Document","type":"main","index":0}]]},"If1":{"main":[[],[{"node":"Error PDF2","type":"main","index":0}]]},"Inicio de sesion":{"main":[[{"node":"Edit Fields","type":"main","index":0},{"node":"Separar Documentos","type":"main","index":0}]]},"Code":{"main":[[{"node":"Send Mail","type":"main","index":0}]]},"Evaluacion # files , peso de archivos":{"main":[[{"node":"Inicio de sesion","type":"main","index":0}]]},"Loop Over Items":{"main":[[{"node":"Edit Fields4","type":"main","index":0}],[{"node":"Switch","type":"main","index":0}]]},"Save_Summary_Data":{"main":[[]]},"Separar Documentos":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Extract from File":{"main":[[]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"VDWTPl3xTKW7fDqy"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"46ef439d-b2d6-48d2-a04e-2e90a2e68c55","triggerCount":0,"tags":[]}